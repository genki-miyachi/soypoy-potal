FROM node:22.15.0-alpine3.21

WORKDIR /app

# pnpmインストール
RUN corepack enable && corepack prepare pnpm@latest --activate

# 依存関係をコピー
COPY package.json pnpm-lock.yaml* ./

# 依存関係をインストール
RUN pnpm install

# アプリケーションのファイルをコピー
COPY . .

# ポートを公開
EXPOSE 3000

# コマンドを実行
CMD ["pnpm", "dev"]
